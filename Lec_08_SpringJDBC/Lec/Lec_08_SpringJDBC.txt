* Problems with JDBC

    Когато използваме чисто JDBC, програмистта е отговорен за ръчното управление на връзката с базата данни, като взима тези стъпки:
    - Зареждане на драйвера в паметта, за да може той да комуникира с базата данни 
    - Да управлява връзката като отвори Connection
    - Трябва да се обработват изключенията понеже JDBC връща checked exceptions

* Spring JDBC 

    Spring JDBC е абстракция над JDBC, като премахваме повтарящия се код, използвайки JdbcTemplate, който:
    - отваря и затваря връзките автоматично
    - Изпълнява SQL заявките сам, който му се подадат
    - Преобразува добре данните като улеснява мапването на редовете от базата данни към Java обекти 

    Понеже отварянето и затварянето на връзката с базата данни е скъпа, Spring JDBC използва DataSource, който пази предварително създадени връзки
    # DataSource е обектът, който знае URL-а на базата, потребителското име и паролата. 
    # Това също се нарича и Connection Pooling
    
* H2 (in-memory)

    Базата данни е in-memory, тоест съществува в RAM паметта, докато приложението работи:
    - Предимството е, че не иска инсталирането на тежък сървъра като примерно Oracle или SQL сървър
    - Недостатък е, че данните са временните и при рестарт на приложенито, базата се изчиства 

    Когато Spring Boot види H2 драйвера, той автоматично конфигурира DataSource bean с найстройки

* JdbcTemplate 

    JdbcTempalte е помощен клас в Spring, който драстично опрастява работата с базата данни
    Когато Spring види анотацията @Autowired над JdbcTemplete се извършва DI чрез IoC контейнера и намира вече създадения JdbcTemplete bean
    # Това се случва благодарение на по-рано създадения DataSource bean

    В Java JDBC има два типа заявки:
    - executeQuery, те се изпозлват само за SELECT заявки
    # Обаче JdbcTemplete абстракта това с меетода query(), когато искаме да изпълним заявка, която ще извлече данни от базата данни 
    - executeUpdate, те се използват само за INSERT, UPDATE, DELETE заявки 
    # Обаче JdbcTemplete абстракта това с меетода update(), когато искаме да изпълним заявка, която би променило състоянието на базата данни 

* Автоматизирана инициализация на бази данни в Spring Boot 

    Spring Boot притежава вградена функционалност да засича и изпълнява конкретни SQL файлове по време на стартирането на приложението:
    - Това гарантира, че базите данни имат необходимата схема и начални данни преди приложението да започне да работи 

    Spring Boot търси за следните два sql заявки, когато стартира приложението:
    - schema.sql, отговаря за DDL (Data Definition Language), в този файл се дефинират самите таблици, които ще бъдат в базите данни 
    - data.sql, отговаря за DML (Data Manipulation Language), в този файл се вмъкват началлните данни в създадените таблици
    # Разбира се могат и да се променят имената, но трябва допълнителни конфигурации за това 

    За да може Spring Boot да открие тези дефинирани sql заявки, те трябва да бъдат поставени в точно определената директория:
    - src/main/resources

* RowMapper

    RowMapper е функционален интерфейс в Spring JDBC, чиято единствена задача е да map-ва един ред от SQL резултата (ResultSet) към един Java обект
    
    Когато се изпълни една Select заявка, базата данни връща ResultSet (таблица с редове и колони), но Java не знае как автоматично да преработи тази информация в обекти
    # Именно тук RawMapper задава начина, по който едни записи от базата данни да се преобразуват на Java обекти 

    Ключови методи:
    - mapRow(ResultSet rs, int rowNum), това е метода, който трябва да се имплементира на RowMapper 
    # ResultSet rs сочи към текущия ред от базата данни, като от него се вадят данни от колоните
    # int rowNum е номерът на текущия ред
    # Важно: Spring автоматично върти цикъл през всичките редове в базата, Spring прави вътрешно извъкване на имплементирания mapRow метод за всеки орделен ред 
    - jdbcTemplate.query() е методът, който се изпълнява, когато искаме да направим SELECT заявка към базата като приема string (самата sql заявка) и RowMapper обект 
    # Резултата на този метод е List<T>

* Връзка с PostgreSQL сървър

    PostgreSQL е система за управление на релационни бази данни (RDBSM) с отворен код, със следните характеристики:
    - той е SQL съвместим
    - надежден е
    - персистен е за разлика от H2, който пази данните временно 

    За да може едно Spring приложение да си комуникира с базата данни, трябва да се конфигурира връзката в специален файл 
    Този файл може да се намира в resource папката и зависимост от формата, може да изглежда така:
    spring:
      datasource:
        url: jdbc:postgresql://localhost:5432/fmi
        username: postgres
        password: tropic
        driver-class-name: org.postgresql.Driver
    # Тук има информация как да се напправи връзка с базата данни и създава bean от тип DataSource 